/*! time-series-tools 16-09-2014 */
function Timeseries(a,b){if(null===a)throw new Error("Values may not be null");if(this.dataValues=a,null===b){var c,d=[];for(c=0;c<a.length;c++)d.push(c);this.timeValues=d}else{if(a.length!==b.length)throw new Error("Both columns must have same number of elements");this.timeValues=b}Object.freeze(this)}function assertNotEmpty(a){if(0===a.length)throw new Error("List length is zero")}function assertSameLength(a,b){if(a.length!==b.length)throw new Error("Both columns must have same number of elements")}function avg(a){assertNotEmpty(a);for(var b=0,c=0;c<a.length;c++)b+=a[c];return b/a.length}function variance(a){assertNotEmpty(a);for(var b=avg(a),c=0,d=0;d<a.length;d++)c+=(a[d]-b)*(a[d]-b);var e=c/a.length;if(0>e)throw new Error("Variance is never negative");return e}function covariance(a,b){assertNotEmpty(a),assertNotEmpty(b),assertSameLength(a,b);for(var c=avg(a),d=avg(b),e=0,f=0;f<a.length;f++)e+=(a[f]-c)*(b[f]-d);return e/(a.length-1)}function least_squares_fit(a,b){var c=covariance(a,b)/covariance(a,a),d=avg(b)-c*avg(a);return[d,c]}function standard_deviation(a){return Math.sqrt(variance(a))}function median(a){assertNotEmpty(a),a.sort(function(a,b){return a-b});var b=a.length;return b%2!==0?a[Math.floor(b/2)]:(a[b/2]+a[b/2+1])/2}function skewness(a){return 3*(avg(a)-median(a))/standard_deviation(a)}function sum(a){for(var b=a.length,c=0,d=0;b>d;d++)c+=a[d];return c}function max(a){return assertNotEmpty(a),a.sort(function(a,b){return a-b}),a[a.length-1]}function min(a){return assertNotEmpty(a),a.sort(function(a,b){return a-b}),a[0]}function diff(a){return diff_lag(a,1)}function diff_lag(a,b){var c=a.length;if(0>=b)throw new Error("Lag must be greater than zero");if(b>=c)throw new Error("Vector has too few elements");for(var d=[],e=0;c-b>e;e++)d.push(a[e+b]-a[e]);return d}Timeseries.prototype.toPlot=function(){"use strict";var a,b=[];for(a=0;a<this.dataValues.length;a++){var c=[];c.push(this.timeValues[a]),c.push(this.dataValues[a]),b.push(c)}return b},"undefined"!=typeof module&&module.exports&&(module.exports={Timeseries:Timeseries}),"undefined"!=typeof module&&module.exports&&(module.exports={max:max,min:min,sum:sum,mean:avg,avg:avg,median:median,skew:skewness,skewness:skewness,variance:variance,cov:covariance,covariance:covariance,lsfit:least_squares_fit,least_squares_fit:least_squares_fit,sd:standard_deviation,standard_deviation:standard_deviation}),"undefined"!=typeof module&&module.exports&&(module.exports={diff:diff});